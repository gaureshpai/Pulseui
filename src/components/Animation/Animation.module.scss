@use "../../styles/_tokens.scss" as *;

.animation {
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform: translateZ(0);

  // Base animation states
  &.type-fade {
    opacity: 0;
    transition: opacity var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      opacity: 1;
    }
  }

  &.type-slide {
    transform: translateX(-100%);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: translateX(0);
    }
  }

  &.type-slide-up {
    transform: translateY(100%);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: translateY(0);
    }
  }

  &.type-slide-down {
    transform: translateY(-100%);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: translateY(0);
    }
  }

  &.type-slide-left {
    transform: translateX(100%);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: translateX(0);
    }
  }

  &.type-slide-right {
    transform: translateX(-100%);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: translateX(0);
    }
  }

  &.type-scale {
    transform: scale(0);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: scale(1);
    }
  }

  &.type-rotate {
    transform: rotate(-180deg);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: rotate(0deg);
    }
  }

  &.type-bounce {
    animation: bounce var(--motion-duration-normal)
      var(--motion-easing-ease-out);
  }

  &.type-flip {
    transform-style: preserve-3d;
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: rotateY(180deg);
    }
  }

  &.type-flip-x {
    transform-style: preserve-3d;
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: rotateX(180deg);
    }
  }

  &.type-flip-y {
    transform-style: preserve-3d;
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: rotateY(180deg);
    }
  }

  &.type-zoom {
    transform: scale(0.5);
    transition: transform var(--motion-duration-normal)
      var(--motion-easing-ease-out);

    &.visible {
      transform: scale(1);
    }
  }

  &.type-pulse {
    animation: pulse var(--motion-duration-normal) infinite;
  }

  &.type-shake {
    animation: shake var(--motion-duration-normal) var(--motion-easing-ease-out);
  }

  &.type-wiggle {
    animation: wiggle var(--motion-duration-normal)
      var(--motion-easing-ease-out);
  }

  // Direction modifiers
  &.direction-out {
    &.type-fade {
      opacity: 1;
      &.visible {
        opacity: 0;
      }
    }

    &.type-slide {
      transform: translateX(0);
      &.visible {
        transform: translateX(100%);
      }
    }

    &.type-scale {
      transform: scale(1);
      &.visible {
        transform: scale(0);
      }
    }
  }

  // Duration modifiers
  &.duration-fast {
    transition-duration: 150ms;
  }

  &.duration-normal {
    transition-duration: 300ms;
  }

  &.duration-slow {
    transition-duration: 500ms;
  }

  &.duration-slower {
    transition-duration: 700ms;
  }

  // Animation state
  &.animating {
    pointer-events: none;
  }
}

// Keyframe animations
@keyframes bounce {
  0%,
  20%,
  53%,
  80%,
  100% {
    transform: translate3d(0, 0, 0);
  }
  40%,
  43% {
    transform: translate3d(0, -30px, 0);
  }
  70% {
    transform: translate3d(0, -15px, 0);
  }
  90% {
    transform: translate3d(0, -4px, 0);
  }
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-10px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(10px);
  }
}

@keyframes wiggle {
  0%,
  7% {
    transform: rotateZ(0);
  }
  15% {
    transform: rotateZ(-15deg);
  }
  20% {
    transform: rotateZ(10deg);
  }
  25% {
    transform: rotateZ(-10deg);
  }
  30% {
    transform: rotateZ(6deg);
  }
  35% {
    transform: rotateZ(-4deg);
  }
  40%,
  100% {
    transform: rotateZ(0);
  }
}

// Performance optimizations
.animation {
  &.type-fade,
  &.type-slide,
  &.type-slide-up,
  &.type-slide-down,
  &.type-slide-left,
  &.type-slide-right,
  &.type-scale,
  &.type-rotate,
  &.type-zoom {
    will-change: transform, opacity;
  }

  &.type-bounce,
  &.type-pulse,
  &.type-shake,
  &.type-wiggle {
    will-change: transform;
  }

  &.type-flip,
  &.type-flip-x,
  &.type-flip-y {
    will-change: transform;
    perspective: 1000px;
  }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  .animation {
    animation: none !important;
    transition: none !important;

    &.visible {
      opacity: 1;
      transform: none;
    }
  }
}
